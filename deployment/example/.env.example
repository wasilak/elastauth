# elastauth Demo Environment - Environment Variables
# 
# This file contains example environment variables for the demo environment.
# Copy this file to .env and customize the values as needed.
#
# ⚠️  WARNING: These are demo values only!
#    DO NOT use these values in production environments!
#    Change all passwords and secrets for production use!

# ============================================================================
# Elasticsearch Configuration
# ============================================================================

# Elasticsearch cluster name
# Used to identify the cluster in logs and monitoring
ELASTICSEARCH_CLUSTER_NAME=elastauth-demo

# Elasticsearch node name
# Unique identifier for this Elasticsearch node
ELASTICSEARCH_NODE_NAME=es-demo-node

# Elasticsearch password for the 'elastic' superuser
# ⚠️  SECURITY WARNING: Change this password immediately for production!
# This password is used for:
#   - Elasticsearch authentication
#   - Health check authentication
#   - elastauth connection to Elasticsearch
ELASTICSEARCH_PASSWORD=demo-password-change-me

# Elasticsearch heap size (Java memory allocation)
# Format: -Xms<initial> -Xmx<maximum>
# Recommendation: Set both to same value (50% of available RAM, max 32GB)
# Example: -Xms4g -Xmx4g for 8GB system
ELASTICSEARCH_JAVA_OPTS=-Xms2g -Xmx2g

# ============================================================================
# Authelia Configuration
# ============================================================================

# Authelia session secret
# Used to encrypt session cookies
# ⚠️  SECURITY WARNING: Generate a strong random secret for production!
# Generate with: openssl rand -base64 32
AUTHELIA_SESSION_SECRET=change-me-to-a-random-secret-at-least-32-characters-long

# Authelia admin username
# Default username for the admin user in the demo
AUTHELIA_ADMIN_USERNAME=admin

# Authelia admin password (plaintext - will be hashed)
# ⚠️  SECURITY WARNING: Change this password for production!
# This is the plaintext password that will be hashed with argon2id
# To generate a hash manually:
#   docker run --rm authelia/authelia:latest authelia crypto hash generate argon2 --password 'your-password'
AUTHELIA_ADMIN_PASSWORD=demo-password

# Authelia admin email
# Email address for the admin user
AUTHELIA_ADMIN_EMAIL=admin@example.com

# Authelia admin display name
# Human-readable name for the admin user
AUTHELIA_ADMIN_DISPLAY_NAME=Admin User

# ============================================================================
# Redis Configuration
# ============================================================================

# Redis host
# Docker service name for Redis (used by Authelia and elastauth)
REDIS_HOST=redis

# Redis port
# Default Redis port
REDIS_PORT=6379

# Redis database number
# Redis supports multiple databases (0-15 by default)
# Use different numbers to separate data between services
REDIS_DB=0

# Redis password (optional)
# Leave empty for no authentication (demo only!)
# ⚠️  SECURITY WARNING: Set a strong password for production!
# REDIS_PASSWORD=

# ============================================================================
# elastauth Configuration
# ============================================================================

# elastauth server port
# Port on which elastauth listens for incoming requests
ELASTAUTH_PORT=3000

# elastauth server host
# Host address to bind to (0.0.0.0 = all interfaces)
ELASTAUTH_HOST=0.0.0.0

# elastauth log level
# Options: debug, info, warn, error
# Use 'debug' for troubleshooting, 'info' for normal operation
ELASTAUTH_LOG_LEVEL=info

# elastauth log format
# Options: json, text
# Use 'json' for structured logging, 'text' for human-readable logs
ELASTAUTH_LOG_FORMAT=json

# ============================================================================
# TLS/SSL Configuration
# ============================================================================

# Certificate Authority (CA) certificate path
# Path to the CA certificate used to sign service certificates
CA_CERT_PATH=/certs/ca.crt

# Certificate Authority (CA) private key path
# Path to the CA private key (keep secure!)
CA_KEY_PATH=/certs/ca.key

# Elasticsearch certificate path
# Path to the Elasticsearch TLS certificate
ELASTICSEARCH_CERT_PATH=/certs/elasticsearch.crt

# Elasticsearch private key path
# Path to the Elasticsearch TLS private key
ELASTICSEARCH_KEY_PATH=/certs/elasticsearch.key

# Authelia certificate path
# Path to the Authelia TLS certificate
AUTHELIA_CERT_PATH=/certs/authelia.crt

# Authelia private key path
# Path to the Authelia TLS private key
AUTHELIA_KEY_PATH=/certs/authelia.key

# ============================================================================
# Docker Configuration
# ============================================================================

# Docker Compose project name
# Used to prefix container names and network names
COMPOSE_PROJECT_NAME=elastauth-demo

# Timezone for all containers
# Use IANA timezone format (e.g., America/New_York, Europe/London)
TZ=UTC

# ============================================================================
# Network Configuration
# ============================================================================

# Elasticsearch HTTP port (host)
# Port exposed on the host machine for Elasticsearch HTTP API
ELASTICSEARCH_HTTP_PORT=9200

# Authelia HTTP port (host)
# Port exposed on the host machine for Authelia web interface
AUTHELIA_HTTP_PORT=9091

# elastauth HTTP port (host)
# Port exposed on the host machine for elastauth proxy
ELASTAUTH_HTTP_PORT=3000

# Redis port (host)
# Port exposed on the host machine for Redis
REDIS_PORT_HOST=6379

# ============================================================================
# Production Security Checklist
# ============================================================================
#
# Before deploying to production, ensure you:
#
# [ ] Change ELASTICSEARCH_PASSWORD to a strong, unique password
# [ ] Generate a new AUTHELIA_SESSION_SECRET (openssl rand -base64 32)
# [ ] Change AUTHELIA_ADMIN_PASSWORD to a strong password
# [ ] Set REDIS_PASSWORD to a strong password
# [ ] Use proper TLS certificates from a trusted CA (not self-signed)
# [ ] Review and restrict network access (firewall rules)
# [ ] Enable proper authentication backend (LDAP, OIDC, etc.)
# [ ] Set up monitoring and alerting
# [ ] Configure proper backup procedures
# [ ] Review all configuration files for security best practices
# [ ] Update all Docker images to latest stable versions
# [ ] Implement proper secrets management (Vault, AWS Secrets Manager, etc.)
# [ ] Enable audit logging for all services
# [ ] Configure rate limiting and DDoS protection
# [ ] Set up proper log aggregation and analysis
# [ ] Implement disaster recovery procedures
#
# ============================================================================
# Additional Notes
# ============================================================================
#
# Environment Variable Precedence:
#   1. Environment variables set in shell
#   2. Variables in .env file
#   3. Variables in docker-compose.yml
#   4. Default values in application code
#
# Using this file:
#   1. Copy to .env: cp .env.example .env
#   2. Customize values in .env
#   3. Docker Compose will automatically load .env
#   4. Never commit .env to version control!
#
# Generating Secure Secrets:
#   - Random string: openssl rand -base64 32
#   - Random hex: openssl rand -hex 32
#   - UUID: uuidgen
#   - Password hash: docker run --rm authelia/authelia:latest authelia crypto hash generate argon2 --password 'your-password'
#
# Testing Configuration:
#   - Validate syntax: docker-compose config
#   - Check environment: docker-compose config | grep -A 5 environment
#   - Test services: make test
#
# ============================================================================
